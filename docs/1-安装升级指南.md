



# 安装/升级 目录
- [Debian 安装配置（已适配中国大陆网络）](#debian-安装配置已适配中国大陆网络)
  - [下载 debian  ISO 镜像](#下载必要软件)
  - [安装 debian](#安装-debian)
- [安装 landscape router（脚本方式）](#安装-landscape-router脚本方式)
- [升级 landscape router（脚本方式）](#安装-landscape-router脚本方式)
- [升级 landscape router（手工方式）](#升级-landscape-router手工方式)
- [安装 landscape router（手工方式）](#安装-landscape-router手工方式)
  - [时区修改到上海](#时区修改到上海)
  - [允许root用户使用密码登录ssh](#允许root用户使用密码登录ssh)
  - [关闭 swap](#关闭-swap)
  - [修改软件源（可选）](#修改软件源可选)
  - [升级内核，到 6.9以上（debian 13 无需升级内核）](#升级内核到-69以上debian-13-无需升级内核)
  - [安装 docker、docker compose（已适配中国大陆网络） ](#安装-dockerdocker-compose已适配中国大陆网络)
  - [Landscape Router 安装（已适配中国大陆网络）](#landscape-安装已适配中国大陆网络)
  - [安装 pppd](#安装-pppd)
  - [创建 landscape systemd 服务文件](#创建-landscape-systemd-服务文件)
  - [下载并上传 landscape-router](#下载并上传-landscape-router)
  - [修改网卡配置](#修改网卡配置)
  - [关闭本机 DNS 服务](#关闭本机-dns-服务)
  - [重启网络，并启动 landscape-router](#重启网络并启动-landscape-router)
  - [登录 landscape 账号 root 密码 root，https://192.168.22.1:6300](#登录-landscape-账号-root-密码-roothttps1921682216300)
  - [至此可以在 landscape-router web 中进行配置](#至此可以在-landscape-router-web-中进行配置)
  - [应用 Landscape-Router 开机启动](#应用-landscape-router-开机启动)
  - [修改apache80端口到8080, 以免后续与其他反代软件冲突](#修改apache80端口到8080-以免后续与其他反代软件冲突)

- [在显示器/终端中 启动/关闭/查看 landscape-router ](#在显示器终端中-启动关闭查看-landscape-router)
- [主机 失联 救急](#主机-失联-救急)

# **debian用户：root，非 root 用户请自行添加 sudo**   
**本教程已适配中国大陆网络** 
# debian 安装配置（已适配中国大陆网络）

## 下载必要软件
SSH工具 (安装一个即可)：[MobaXterm（仅有win版本）](https://mobaxterm.mobatek.net/download.html) | [Tabby](https://github.com/Eugeny/tabby/releases/tag/v1.0.224)  
安装U盘制作工具（安装一个即可）: [balena etcher](https://etcher.balena.io/) | [Ventoy](https://www.ventoy.net/cn/download.html)   

以下三种系统，选一个即可，建议 Debian 13   
Debian 12 iso 安装镜像: [官方下载](https://www.debian.org/releases/bookworm/) | [兰州大学镜像](http://mirror.lzu.edu.cn/debian-cd/) | [163镜像](http://mirrors.163.com/debian-cd/)    
Debian 13 iso 安装镜像: [官方下载](https://www.debian.org/download.zh-cn.html) | [兰州大学镜像](http://mirror.lzu.edu.cn/debian-cd/) | [163镜像](http://mirrors.163.com/debian-cd/)   
PVE 9: [官方下载](https://www.proxmox.com/en/downloads)    

## 安装 debian

**debian用户：root，非 root 用户请自行添加 sudo**   
### 注意❗：   
**1、语言选择 us/english，避免中文路径与某些软件不兼容,（后面会调整时区到上海）。**   
**2、❗❗❗启用网络镜像站点，选择 中国  ❗❗❗**    
**3、仅需 安装 webserver 、sshserver、标准配置，3个选项勾选即可**    
[详细安装过程参考，建议在安装过程中选择 ❗❗❗**中国网络镜像站点**❗❗❗](https://246859.github.io/posts/code/linux/debian12_install.html)        

![image](/images/1.png)   
![image](/images/8.png) 

## 允许root用户使用密码登录ssh    
**debian用户：root，非 root 用户请自行添加 sudo**   
```shell
# 修改 sshd_config 文件
nano /etc/ssh/sshd_config

```

```shell
# 插入这一行，或者找到 PermitRootLogin 那一行修改成下面这样亦可
PermitRootLogin yes
```
编辑结束后，先 `` ctrl + s `` 保存，再 `` ctrl + x `` 退出。

```
# 重启 ssh 或 重启系统  
systemctl restart ssh

```
## 后续操作可在 ssh 工具里进行
```shell
# 查看 主机 IP
ip a

```

![](/images/11.png) 


# 安装 landscape router（脚本方式）

**仅适用于 Debian 系 发行版 如 ubuntu、armbian、linux mint 等**   
**kernel 版本 6.9以上**   
**建议在 debian 安装中选取 web server、ssh server、standard system utilities**   
```shell
# 安装 curl，没有 curl 也以下载脚到本地 手动执行
apt update && apt install curl -y
```

* 使用 github 下载安装脚本
```shell
# 安装 Landscape Router
curl -fsSL -o https://raw.githubusercontent.com/CyberRookie-X/Install_landscape_on_debian12_and_manage_compose_by_dpanel/main/install_landscape.sh  && chmod +x install_landscape.sh && ./install_landscape.sh
```


* 使用 https://ghfast.top/ 下载安装脚本
```shell
# 安装 Landscape Router
curl -fsSL -o https://ghfast.top/https://raw.githubusercontent.com/CyberRookie-X/Install_landscape_on_debian12_and_manage_compose_by_dpanel/main/install_landscape.sh  && chmod +x install_landscape.sh && ./install_landscape.sh
```
# 升级 landscape router（脚本方式）
**待补充**
<!--
* 建议用连接 github 下载脚本、landscape文件，保证本机能过够访问 github
* 如遇下载失败，请调整网络，再次执行脚本即可
* 中国镜像加速不保证有效，不建议使用，如遇下载失败再次执行脚本即可
* 建议每次执行通过网络拉取脚本，以使用得最新版脚本
* 建议保存脚本执行命令到 终端工具中方便下次直接使用，如 serverbox
* 参数说明：`up` 最新稳定版；`upb` Beta版（最新版）；`cn` 中国镜像加速；`r` 升级完成自动重启系统

```shell
# 升级到 Beta 版，并自动重启系统
curl -fsSL https://raw.githubusercontent.com/CyberRookie-X/Install_landscape_on_debian12_and_manage_compose_by_dpanel/main/upgrade_landscape.sh | bash -s upb r

```

```shell
# 升级到 稳定 版 并自动重启系统
curl -fsSL https://raw.githubusercontent.com/CyberRookie-X/Install_landscape_on_debian12_and_manage_compose_by_dpanel/main/upgrade_landscape.sh | bash -s up r

```

```shell
# 升级到 Beta 版，并自动重启系统（中国镜像加速）
curl -fsSL https://ghfast.top/https://raw.githubusercontent.com/CyberRookie-X/Install_landscape_on_debian12_and_manage_compose_by_dpanel/main/upgrade_landscape.sh | bash -s upb cn r

```

```shell
# 升级到 稳定 版 并自动重启系统（中国镜像加速）
curl -fsSL https://ghfast.top/https://raw.githubusercontent.com/CyberRookie-X/Install_landscape_on_debian12_and_manage_compose_by_dpanel/main/upgrade_landscape.sh | bash -s up cn r

```
![](../images/13.png) -->

# 升级 landscape router（手工方式）
[下载 landscape-webserver-x86_64、static.zip 文件](https://github.com/ThisSeanZhang/landscape/releases/)   
![image](/images/7.png)       


```shell
# 关闭服务
systemctl stop landscape-router.service

```
**解压、注意嵌套目录** 
放到下面创建的目录。（注意 static 可能存在嵌套，需要调整，参考下图）   
![image](/images/3.png)  
![image](/images/4.png)   
替换 staic目录（解压、注意嵌套目录）   
替换 landscape文件，并赋权   
```shell
# 建议重启系统，仅重启服务，无法正常使用分流功能
reboot

```

# 安装 landscape（手工）

## 时区修改到上海   
**debian用户：root，非 root 用户请自行添加 sudo**   
**debian13 安装过程中配置时区后，无需重复配置时区**    
```shell
# 设置时区为上海
timedatectl set-timezone Asia/Shanghai
 # 验证配置是否生效
timedatectl

```
   


## 关闭 swap
Swap 是内存的"应急备份"，用磁盘空间换取系统稳定性，但过度依赖会拖慢速度。合理配置可平衡性能与安全。
### nano 用法简述
编辑结束后，先 `` ctrl + s `` 保存，再 `` ctrl + x `` 退出。

### 注释或删除 Swap 挂载项
```shell
nano /etc/fstab

```
找到包含 swap 的行（通常类似 /swapfile 或 /dev/mapper/...-swap），在行首添加 # 注释掉，例如：
```shell
# debian 12
# /swapfile none swap sw 0 0
```

```shell
# debian 13
# /dev/mapper/debian--vg-swap_1 none            swap    sw              0       0
```

**编辑结束后，先 `` ctrl + s `` 保存，再 `` ctrl + x `` 退出。**  
<!--
### 禁用 systemd 管理的 Swap 单元（若有/非必须，此项可直接跳过）
```shell
# 检查激活的 Swap 单元
systemctl --type swap

# 禁用所有 Swap 单元（替换 UNIT_NAME 为实际名称）
systemctl mask UNIT_NAME.swap

```
-->
## 修改软件源（可选）
**建议在安装时选择中国源**  
**安装时网络镜像站点已选择中国源，可跳过换源**  
```shell
# 若软件源非为国内源，可以考虑修改软件源为国内源，例如ustc源
# 备份源
cp /etc/apt/sources.list /etc/apt/sources.list.bak

```
**debian12源 适用于debian12**
```shell
# ustc源 适用于debian12
cat <<EOF > /etc/apt/sources.list
deb https://mirrors.ustc.edu.cn/debian/ bookworm main contrib non-free non-free-firmware
deb-src https://mirrors.ustc.edu.cn/debian/ bookworm main contrib non-free non-free-firmware

deb https://mirrors.ustc.edu.cn/debian/ bookworm-updates main contrib non-free non-free-firmware
deb-src https://mirrors.ustc.edu.cn/debian/ bookworm-updates main contrib non-free non-free-firmware

deb https://mirrors.ustc.edu.cn/debian/ bookworm-backports main contrib non-free non-free-firmware
deb-src https://mirrors.ustc.edu.cn/debian/ bookworm-backports main contrib non-free non-free-firmware

# 安全更新源
deb https://mirrors.ustc.edu.cn/debian-security/ bookworm-security main contrib non-free non-free-firmware
deb-src https://mirrors.ustc.edu.cn/debian-security/ bookworm-security main contrib non-free non-free-firmware
EOF
```

**debian13源 适用于debian13**
```shell
# ustc源 适用于debian13
cat <<EOF > /etc/apt/sources.list
deb http://mirrors.ustc.edu.cn/debian/ trixie main contrib non-free non-free-firmware
deb-src http://mirrors.ustc.edu.cn/debian/ trixie main contrib non-free non-free-firmware

deb http://mirrors.ustc.edu.cn/debian/ trixie-updates main contrib non-free non-free-firmware
deb-src http://mirrors.ustc.edu.cn/debian/ trixie-updates main contrib non-free non-free-firmware

deb http://mirrors.ustc.edu.cn/debian/ trixie-backports main contrib non-free non-free-firmware
deb-src http://mirrors.ustc.edu.cn/debian/ trixie-backports main contrib non-free non-free-firmware

# 安全更新源
deb http://mirrors.ustc.edu.cn/debian-security trixie-security main contrib non-free non-free-firmware
deb-src http://mirrors.ustc.edu.cn/debian-security trixie-security main contrib non-free non-free-firmware
EOF
```

## 升级内核，到 6.9以上（debian 13 无需升级内核）   

``` shell
# 查看内核版本，大于6.9则无需升级内核
uname -r

```

```shell
apt update
apt search linux-image-6.12

```

```shell
# 安装内核镜像及头文件（指定 Backports 源）
apt install -t bookworm-backports \
    linux-image-6.12.30+bpo-amd64 \
    linux-headers-6.12.30+bpo-amd64

# 安装失败就问AI，6.9以上即可。   

# 更新 GRUB 引导配置
update-grub

# 重启系统生效
reboot

```
## 安装 docker、docker compose（已适配中国大陆网络）  
### 脚本方式安装（三种脚本选一种）
```shell
# 安装curl   
apt update
apt install curl -y
curl --version

```
**以下三种方式，选择一种(已包含dockercompose)**

```shell
# 三种方式，选择一种(已包含dockercompose)

# 使用官方源安装（中国大陆 直接访问较慢）
curl -fsSL https://get.docker.com | bash && docker compose version

# 使用阿里源安装
curl -fsSL https://get.docker.com | bash -s docker --mirror Aliyun && docker compose version

# 使用中国区 Azure 源安装
curl -fsSL https://get.docker.com | bash -s docker --mirror AzureChinaCloud && docker compose version
```
返回docker版本信息即为成功   
## 为 Docker 配置全局时区为上海
**如需使用 其他机器如 nas 中部署的 Dpanel、portainer、dockge 等面板，可在此配置 docker tcp socket**
```shell
systemctl edit docker

```
**添加下面几行**  

```shell
[Service]
# 上面这一行必须要有
# 以下一行，配置全局时区为上海，新建容器自动配置，旧容器需重新创建容器。仍可在 docker run -e 环境变量中为容器指定其他时区 
Environment="TZ=Asia/Shanghai"

```
编辑结束后，先 `` ctrl + s `` 保存，再 `` ctrl + x `` 退出。

## 为 Docker 容器启用 ipv6

**当前landscape 开启docker ipv6不会立即生效，没有主动发起 RS ，得等 上级 RA 的周期**  
**后续某一版本会解决这一问题**

```shell
# 容器开启 ipv6 ，容器访问互联网为 nat66 方式
# 已创建过 daemon.json 文件的，需用 nano /etc/docker/daemon.json 修改，不可使用以下 cat 写入
cat <<EOF > /etc/docker/daemon.json
{
  "ipv6": true,
  "fixed-cidr-v6": "fd00::/80"
}
EOF

``` 
## Landscape Router 安装（已适配中国大陆网络）

## 安装 pppd
```shell
# 用于 pppoe 拨号
apt install ppp -y
pppd -version

```

## 创建 landscape systemd 服务文件   

```shell
nano /etc/systemd/system/landscape-router.service

```

```shell
[Unit]
Description=Landscape Router

[Service]
ExecStart=/root/.landscape-router/landscape-webserver-x86_64
# 注意这个路径与下面创建的landscape-router目录相同。
Restart=always
User=root
LimitMEMLOCK=infinity

[Install]
WantedBy=multi-user.target
```
**编辑结束后，先 `` ctrl + s `` 保存，再 `` ctrl + x `` 退出。**   

```shell
systemctl daemon-reload && systemctl restart docker

```

## 下载并解压后上传 landscape-router  

[下载 landscape-webserver-x86_64、static.zip 文件](https://github.com/ThisSeanZhang/landscape/releases/)   
![image](/images/7.png)   
```shell
# 创建landscape-router目录。
# 若自定义路径，则systemd服务文件路径也要修改。   
cd /root
mkdir /root/.landscape-router
cd /root/.landscape-router

```    
解压后，放到下面创建的目录。（注意 static 可能存在嵌套，需要调整，参考下图）   
![image](/images/3.png)   
![image](/images/4.png)   

```shell
# 上传文件后，赋权
chmod -R 755 /root/.landscape-router

```
## 修改网卡配置   
<!--
将 LAN 网卡全设置为 manual 后, 暂时无法通过lan访问这个dabian。需要至少一个网卡拥有静态IP，以访问 landscape webui。  
有2种方式：  
1、（不推荐）将一个lan网卡设为 static 其他网卡设备配置为 manual，之后可在web中可将这张网卡加入网桥，但需配置为manual。   
2、（推荐）对于pppoe用户，将 WAN 的网卡额外在配置文件中设置一个静态 IP, pppoe 拨号会自动生成一个虚拟网卡，与该配置不冲突。   
建议采用方式2，即使路由程序出现故障时, 可将电脑/手机设置为静态IP，访问landscape ui。 例如 wan 设置为 192.168.22.1/24时，另一台电脑/手机将IP设为192.168.22.2 ~ 192.168.22.255之一，连接wan口后，即可访问 landscape ui 。   
```shell
# 获取网卡名
ip a

```

```shell
# 当前修改不会影响当前网络及ssh连接，后面会有重启network的步骤，那时才会生效
nano /etc/network/interfaces

```
**上半部分保持原样，仅修改下半部分**
```shell
# This file describes the network interfaces available on your system
# and how to activate them. For more information, see interfaces(5).

source /etc/network/interfaces.d/*

# The loopback network interface
auto lo
iface lo inet loopback


# 上面部分保持原样即可，不需要修改
#---------------------------------------------------------------------
# 以下各部分 参照我这里的结构 修改


# pppoe 后生成一个pppoe网卡，与此网卡不冲突
# 如 wan 使用 dhcp 客户端，则需在 UI 中配置好 lan 后，将此项改为 manual 并重启系统，再在 UI 中配置 wan
# 假定 1 网卡用于 WAN 网卡
auto <第 1 张网卡名> 
iface <第 1 张网卡名> inet static
    address 192.168.22.1
    netmask 255.255.255.0

# 后续可在 Landscape UI 中创建 Land 网桥
# 假定 2~3 网卡用于 LAN 网卡
auto <第 2 张网卡名>
iface <第 2 张网卡名> inet manual

auto <第 3 张网卡名>
iface <第 3 张网卡名> inet manual
```
**编辑结束后，先 `` ctrl + s `` 保存，再 `` ctrl + x `` 退出。**   
-->
1. 将所有网卡设置为 manual。（此时并未重启 networking ，不会导致失联）
2. 编写 `landscape_init.toml` 配置lan （wan 稍后在 landscape UI 中配置）
```shell
# 当前修改不会影响当前网络及ssh连接，后面会有重启network的步骤，那时才会生效
nano /etc/network/interfaces

```
**上半部分保持原样，仅修改下半部分**
```shell
# This file describes the network interfaces available on your system
# and how to activate them. For more information, see interfaces(5).

source /etc/network/interfaces.d/*

# The loopback network interface
auto lo
iface lo inet loopback


# 上面部分保持原样即可，不需要修改
#---------------------------------------------------------------------
# 以下各部分 参照我这里的结构 修改

# 假定 1 网卡用于 WAN 网卡
auto <第 1 张网卡名> 
iface <第 1 张网卡名> inet manual

# 后续可在 Landscape UI 中创建 Land 网桥
# 假定 2~4 网卡用于 LAN 网卡，有几个网卡，写几个
auto <第 2 张网卡名>
iface <第 2 张网卡名> inet manual

auto <第 3 张网卡名>
iface <第 3 张网卡名> inet manual

auto <第 4 张网卡名>
iface <第 4 张网卡名> inet manual

```
```shell
# 创建 landscape_init.toml 配置文件
nano /root/.landscape-router/landscape_init.toml

```
**wan配置为 dhcp 客户端模式**
```toml
# ==== 创建 lan1 网桥 ====
[[ifaces]]
name = "lan1"
create_dev_type = "bridge" # 创建 网桥
zone_type = "lan" # 用于 lan 模式
enable_in_boot = true
wifi_mode = "undefined"

# lan1 开启 ebpf 路由
[[route_lans]]
iface_name = "lan1"
enable = true

# ==== 绑定物理网卡到 lan1 网桥 ====
[[ifaces]]
name = "<第 2 张网卡名>" # 参照 /etc/network/interfaces 修改成真实的 网卡名
create_dev_type = "no_need_to_create"
controller_name = "lan1" # 绑定这张网卡到 lan1 网桥
zone_type = "undefined"
enable_in_boot = true
wifi_mode = "undefined"

[[ifaces]]
name = "<第 3 张网卡名>" # 参照 /etc/network/interfaces 修改成真实的 网卡名
create_dev_type = "no_need_to_create"
controller_name = "lan1" # 绑定这张网卡到 lan1 网桥
zone_type = "undefined"
enable_in_boot = true
wifi_mode = "undefined"

[[ifaces]]
name = "<第 4 张网卡名>" # 参照 /etc/network/interfaces 修改成真实的 网卡名
create_dev_type = "no_need_to_create"
controller_name = "lan1" # 绑定这张网卡到 lan1 网桥
zone_type = "undefined"
enable_in_boot = true
wifi_mode = "undefined"

# ==== lan1 配置 DHCP ====
[[dhcpv4_services]]
iface_name = "lan1"
enable = true

[dhcpv4_services.config]
ip_range_start = "192.168.88.100"
ip_range_end = "192.168.88.200"
server_ip_addr = "192.168.88.1"
network_mask = 24
mac_binding_records = []

```

<!-- # ==== 配置 wan 网卡 ====

[[ifaces]]
name = "<第 1 张网卡名>" # 参照 /etc/network/interfaces 修改成真实的 网卡名
create_dev_type = "no_need_to_create"
zone_type = "wan" # 用于 wan 模式
enable_in_boot = true
wifi_mode = "undefined"

# 网卡1 DHCP 客户端 与 静态 IP 只能 二选一

# == 网卡 1 配置为 DHCP 客户端 ==
[[ipconfigs]]
iface_name = "<第 1 张网卡名>"
enable = true
update_at = 1757726328181.0

[ipconfigs.ip_model]
t = "dhcpclient"
default_router = false
custome_opts = []

# 将 网卡1 设为 默认路由，只有 1 个 wan 网卡可被设置为默认路由
[[route_wans]]
iface_name = "<第 1 张网卡名>"
enable = true

[[nats]]
iface_name = "<第 1 张网卡名>"
enable = true

[nats.nat_config.tcp_range]
start = 32768
end = 65535

[nats.nat_config.udp_range]
start = 32768
end = 65535

[nats.nat_config.icmp_in_range]
start = 32768
end = 65535

# == 网卡 1 配置静态 IP ==
[[ipconfigs]]
iface_name = "<第 1 张网卡名>" # 应用在哪张网卡上
enable = true # 是否启用

[ipconfigs.ip_model] # 具体的 IP 配置方式
t = "static" # 静态 IP 配置
default_router_ip = "10.1.1.10" # 路由 IP
default_router = true # 是否将 default_router_ip 设置为默认路由
ipv4 = "10.1.1.237" # 当前网卡将要设置的静态 IP
ipv4_mask = 24

# 将 网卡1 设为 默认路由，只有 1 个 wan 网卡可被设置为默认路由
[[route_wans]]
iface_name = "<第 1 张网卡名>"
enable = true

[[nats]]
iface_name = "<第 1 张网卡名>"
enable = true

[nats.nat_config.tcp_range]
start = 32768
end = 65535

[nats.nat_config.udp_range]
start = 32768
end = 65535

[nats.nat_config.icmp_in_range]
start = 32768
end = 65535

# == 网卡 1 配置 pppoe 拨号 ==
[[marks]]
iface_name = "<第 1 张网卡名>-tuk"
enable = true

[[pppds]]
attach_iface_name = "<第 1 张网卡名>"
iface_name = "<第 1 张网卡名>-tuk"
enable = true

[pppds.pppd_config]
default_route = true
peer_id = "<pppoe 账号>"
password = "<pppoe 密码>"

# 将 <第 1 张网卡名>-tuk 设为 默认路由，只有 1 个 wan 网卡可被设置为默认路由
[[route_wans]]
iface_name = "<第 1 张网卡名>-tuk"
enable = true

[[nats]]
iface_name = "<第 1 张网卡名>-tuk"
enable = true

[nats.nat_config.tcp_range]
start = 32768
end = 65535

[nats.nat_config.udp_range]
start = 32768
end = 65535

[nats.nat_config.icmp_in_range]
start = 32768
end = 65535 -->

## 创建 landscape 管理员（可选）

**默认管理员/密码 均为 root**

```shell
nano /etc/landscape/landscape.toml

```

```toml
[auth]
# 登录用户名
admin_user = "root"
# 登录密码
admin_pass = "root"

```

**编辑结束后，先 `` ctrl + s `` 保存，再 `` ctrl + x `` 退出。**   
## 关闭本机 DNS 服务   

```shell
# 不用在意报错，执行一遍即可
systemctl stop systemd-resolved
systemctl disable systemd-resolved
systemctl mask systemd-resolved

```
## 检查 6300、6443 端口是否被占用
无输出，则 landscape 可以使用 6300、6443 端口  
```shell
ss -tulnp | grep -E ':6300|:6443' 

```

## 重启网络，并启动 landscape-router    

```shell
# 重启网络，并检查能否通过 192.168.22.1 连接 SSH（刚刚设置的 wan 网卡 IP）
systemctl restart networking

```

```shell
# 在 ssh 能连接的情况下（网络配置正确） 启动 landscape-router
systemctl start landscape-router.service && systemctl status landscape-router

```

输出包含 ` active (running) ` 表示 Landscape Router 已启动 

![](/images/10.png)
<!--
（非必要步骤）亦可通过端口检查 landsape 是否成功启动，检查 6300、6443 端口是否为 `landscape-webse`   
```shell
ss -tulnp | grep -E ':6300|:6443' 

```
-->
   
## 登录 Landscape Router，验证软件是否正确安装
## 账号 root 密码 root，通过wan网卡静态IP访问，http://192.168.22.1:6300   (安装过程并未结束)
## 按需进行一些基本的网络配置后，继续进行后面的步骤

## 应用 Landscape-Router 开机启动   

```shell
# 配置无误后，应用landscape-router 开机启动
systemctl enable landscape-router.service

```

## 至此可以在 Landscape-Router Web 中进行更多配置   

**[详细设置参考官方文档](https://landscape.whileaway.dev/feature/flow.html)**


## 修改apache80端口到8080, 以免后续与其他反代软件冲突   

```shell
# listen 由 80 改为 8080（任意端口）
nano /etc/apache2/ports.conf

```
   
**listen 由 80 改到 8080（任意端口）**  
**编辑结束后，先 `` ctrl + s `` 保存，再 `` ctrl + x `` 退出。**      

```shell
systemctl restart apache2

```

# 主机 失联 救急
* 在 网卡 都设为 manul 的情况下，在 UI 中配置 lan 时失误，可能导致 UI 失联
* 只需 将 合适的网卡，改为 static 并配置 ip/掩码，即可通过 IP 访问 UI

   

## 至此安装完成，请在浏览器中访问 http://192.168.22.1:6300 进一步配置 Landscape Router


# 在显示器/终端中 启动/关闭/查看 landscape-router   

需要对landscape 先赋予执行权限   
```shell
# 启动服务
systemctl start landscape-router.service

# 重启服务
systemctl restart landscape-router.service

# 停止服务
systemctl stop landscape-router.service

# 启用 开机启动服务 ( 确认没有问题之后执行 )
systemctl enable landscape-router.service

# 禁用 开机启动服务 ( 确认没有问题之后执行 )
systemctl disable landscape-router.service

# 查看 landscape-router 状态，如内存占用
systemctl status landscape-router
```
